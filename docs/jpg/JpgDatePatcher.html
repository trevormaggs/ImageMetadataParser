<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_451) on Wed Feb 11 22:47:40 AEDT 2026 -->
<title>JpgDatePatcher</title>
<meta name="date" content="2026-02-11">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="JpgDatePatcher";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JpgDatePatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../jpg/JpgParser.html" title="class in jpg"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?jpg/JpgDatePatcher.html" target="_top">Frames</a></li>
<li><a href="JpgDatePatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jpg</div>
<h2 title="Class JpgDatePatcher" class="title">Class JpgDatePatcher</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>jpg.JpgDatePatcher</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">JpgDatePatcher</span>
extends java.lang.Object</pre>
<div class="block">A utility class providing the functionality to surgically patch dates in both the EXIF (TIFF) and
 XMP (XML) segments of JPEG files. It overwrites bytes inline using the file stream resource to
 maintain file integrity and prevent metadata displacement.

 <p>
 The patcher handles three distinct date formats:
 </p>

 <ul>
 <li><b>EXIF ASCII:</b> Standardised "yyyy:MM:dd HH:mm:ss" strings</li>
 <li><b>GPS Rational:</b> Binary encoded time components (H/1, M/1, S/1) in UTC</li>
 <li><b>XMP ISO 8601:</b> XML-based date strings with or without timezone offsets</li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>1.5</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Trevor Maggs</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.time.format.DateTimeFormatter</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#EXIF_FORMATTER">EXIF_FORMATTER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.time.format.DateTimeFormatter</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#GPS_FORMATTER">GPS_FORMATTER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static logger.LogFactory</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#LOGGER">LOGGER</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#JpgDatePatcher--">JpgDatePatcher</a></span>()</code></th>
<td class="colLast">
<div class="block">Default constructor is unsupported and will always throw an exception.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#patchAllDates-java.nio.file.Path-java.nio.file.attribute.FileTime-">patchAllDates</a></span>(java.nio.file.Path&nbsp;imagePath,
             java.nio.file.attribute.FileTime&nbsp;newDate)</code></th>
<td class="colLast">
<div class="block">Patches all identified metadata dates within the JPEG file at the specified path, iterating
 through JPEG markers to identify and process APP1 segments containing EXIF or XMP payloads.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#patchAllDates-java.nio.file.Path-java.nio.file.attribute.FileTime-boolean-">patchAllDates</a></span>(java.nio.file.Path&nbsp;imagePath,
             java.nio.file.attribute.FileTime&nbsp;newDate,
             boolean&nbsp;xmpDump)</code></th>
<td class="colLast">
<div class="block">Patches all identified metadata dates within the JPEG file at the specified path, iterating
 through JPEG markers to identify and process APP1 segments containing EXIF or XMP payloads.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#processExifSegment-common.ImageRandomAccessWriter-int-java.time.ZonedDateTime-">processExifSegment</a></span>(<a href="../common/ImageRandomAccessWriter.html" title="class in common">ImageRandomAccessWriter</a>&nbsp;writer,
                  int&nbsp;length,
                  java.time.ZonedDateTime&nbsp;zdt)</code></th>
<td class="colLast">
<div class="block">Patches the ASCII date tags and binary GPS time-stamp rationals if they are present within an
 EXIF segment.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../jpg/JpgDatePatcher.html#processXmpSegment-common.ImageRandomAccessWriter-int-java.time.ZonedDateTime-">processXmpSegment</a></span>(<a href="../common/ImageRandomAccessWriter.html" title="class in common">ImageRandomAccessWriter</a>&nbsp;writer,
                 int&nbsp;length,
                 java.time.ZonedDateTime&nbsp;zdt)</code></th>
<td class="colLast">
<div class="block">Scans the XMP XML content for date-related tags and overwrites their values.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOGGER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOGGER</h4>
<pre>private static final&nbsp;logger.LogFactory LOGGER</pre>
</li>
</ul>
<a name="EXIF_FORMATTER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EXIF_FORMATTER</h4>
<pre>private static final&nbsp;java.time.format.DateTimeFormatter EXIF_FORMATTER</pre>
</li>
</ul>
<a name="GPS_FORMATTER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GPS_FORMATTER</h4>
<pre>private static final&nbsp;java.time.format.DateTimeFormatter GPS_FORMATTER</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="JpgDatePatcher--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JpgDatePatcher</h4>
<pre>private&nbsp;JpgDatePatcher()</pre>
<div class="block">Default constructor is unsupported and will always throw an exception.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.UnsupportedOperationException</code> - to indicate that instantiation is not supported</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="patchAllDates-java.nio.file.Path-java.nio.file.attribute.FileTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>patchAllDates</h4>
<pre>public static&nbsp;void&nbsp;patchAllDates(java.nio.file.Path&nbsp;imagePath,
                                 java.nio.file.attribute.FileTime&nbsp;newDate)
                          throws java.io.IOException</pre>
<div class="block">Patches all identified metadata dates within the JPEG file at the specified path, iterating
 through JPEG markers to identify and process APP1 segments containing EXIF or XMP payloads.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imagePath</code> - the <code>Path</code> to the JPG to be patched</dd>
<dd><code>newDate</code> - the new timestamp to apply to all metadata fields</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the file cannot be read, parsed, or written to</dd>
</dl>
</li>
</ul>
<a name="patchAllDates-java.nio.file.Path-java.nio.file.attribute.FileTime-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>patchAllDates</h4>
<pre>public static&nbsp;void&nbsp;patchAllDates(java.nio.file.Path&nbsp;imagePath,
                                 java.nio.file.attribute.FileTime&nbsp;newDate,
                                 boolean&nbsp;xmpDump)
                          throws java.io.IOException</pre>
<div class="block">Patches all identified metadata dates within the JPEG file at the specified path, iterating
 through JPEG markers to identify and process APP1 segments containing EXIF or XMP payloads.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imagePath</code> - the <code>Path</code> to the JPG to be patched</dd>
<dd><code>newDate</code> - the new timestamp to apply to all metadata fields</dd>
<dd><code>xmpDump</code> - indicates whether to dump XMP data into an XML-formatted file for debugging. If true,
        a file is created based on the image name</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the file cannot be read, parsed, or written to</dd>
</dl>
</li>
</ul>
<a name="processExifSegment-common.ImageRandomAccessWriter-int-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processExifSegment</h4>
<pre>private static&nbsp;void&nbsp;processExifSegment(<a href="../common/ImageRandomAccessWriter.html" title="class in common">ImageRandomAccessWriter</a>&nbsp;writer,
                                       int&nbsp;length,
                                       java.time.ZonedDateTime&nbsp;zdt)
                                throws java.io.IOException</pre>
<div class="block">Patches the ASCII date tags and binary GPS time-stamp rationals if they are present within an
 EXIF segment. Note that any date-time entries associated with GPS will be recorded in UTC,
 where the rational is 8 bytes (4 for numerator and 4 for denominator).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>writer</code> - the writer used to perform the in-place modification</dd>
<dd><code>length</code> - the length of the TIFF payload beginning at the TIFF header</dd>
<dd><code>zdt</code> - the target date and time</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the TIFF structure is corrupt or writing fails</dd>
</dl>
</li>
</ul>
<a name="processXmpSegment-common.ImageRandomAccessWriter-int-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processXmpSegment</h4>
<pre>private static&nbsp;void&nbsp;processXmpSegment(<a href="../common/ImageRandomAccessWriter.html" title="class in common">ImageRandomAccessWriter</a>&nbsp;writer,
                                      int&nbsp;length,
                                      java.time.ZonedDateTime&nbsp;zdt)
                               throws java.io.IOException</pre>
<div class="block">Scans the XMP XML content for date-related tags and overwrites their values.

 <p>
 This method performs an in-place binary overwrite. It maps character indices to UTF-8 byte
 offsets to ensure the physical write position remains accurate, even if the XML contains
 multi-byte characters.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>writer</code> - the writer used to perform the in-place modification</dd>
<dd><code>length</code> - the length of the XMP payload</dd>
<dd><code>zdt</code> - the target date and time</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs during the overwrite process</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JpgDatePatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../jpg/JpgParser.html" title="class in jpg"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?jpg/JpgDatePatcher.html" target="_top">Frames</a></li>
<li><a href="JpgDatePatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
